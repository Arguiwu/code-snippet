<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<title>顶部进度条</title>
	<style type="text/css">
		.progress {
			position: fixed;
			top: 0;
			left: 0;
			width: 0;
			height: 2px;
			z-index: 99;
			border-radius: 0 1px 1px 0;
			-webkit-transition: all 1000ms;
			transition: all 1000ms;
			background: #4b9cdb;
			box-shadow: 0 0 10px #4b9cdb;
		}
		* {
			margin: 0;
			padding: 0;
		}
		html,
		body {
			height: 100%;
		}
	</style>
</head>
<body>
	<div id="progress" class="progress"></div>
	<iframe src="http://niaoyun.com" frameborder="0" width="100%" height="100%"></iframe>
	<script type="text/javascript">
		(function() {
			var progress = document.getElementById('progress'),
				progressNum = 1;
			var random = function(min, max) {
					return Math.floor(Math.random() * (max - min + 1) + min);
				};
			var onprogress = function() {
				var timeout = random(10, 30);
				setTimeout(function() {
					if(window.loaded) {
						progress.style.width = '100%';
						return;
					}

					progressNum += random(1, 5);

					if(progressNum > 98) {
						progressNum = 98;
					}
					progress.style.width = progressNum + '%';
					onprogress();
				}, timeout);
			}
			onprogress();
			window.onload = function() {
				window.loaded = true;
			}
		})();
	</script>
</body>
</html>